{% extends "base.html" %}
{% block content %}
  <section class="max-w-5xl mx-auto">
    <a href="{{ url_for('home') }}"
       class="inline-flex items-center gap-1 text-xs text-slate-500 hover:text-emerald-700 mb-3">
      ‚Üê Back to events
    </a>

    <div class="grid gap-6 md:grid-cols-[minmax(0,2fr)_minmax(0,1.2fr)] items-start">

      <article class="rounded-xl border border-slate-200 bg-white shadow-sm p-5 sm:p-6">
        <header class="mb-4">
          <div class="flex flex-wrap items-center justify-between gap-3 mb-1.5">
            <h1 class="text-xl sm:text-2xl font-semibold text-slate-900">
              {{ event.name }}
            </h1>
            {% if event.category %}
              <span class="px-3 py-1 rounded-full text-xs bg-emerald-50 text-emerald-700 border border-emerald-200">
                {{ event.category }}
              </span>
            {% endif %}
          </div>
          <div class="flex flex-wrap gap-2 text-xs text-slate-500">
            {% if event.date %}
              <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-50 border border-slate-200">
                <span>üìÖ</span>
                <span>{{ event.date }}</span>
              </span>
            {% endif %}
            {% if event.location %}
              <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-50 border border-slate-200">
                <span>üìç</span>
                <span>{{ event.location }}</span>
              </span>
            {% endif %}
          </div>
        </header>

        <section class="mb-5 text-sm sm:text-base text-slate-700 leading-relaxed">
          {{ event.description }}
        </section>

        <section class="mb-5">
          <h2 class="text-sm font-semibold text-slate-900 mb-2">
            Key information
          </h2>
          <ul class="text-xs sm:text-sm text-slate-600 space-y-1.5">
            {% if event.date %}
              <li>‚Ä¢ Date: {{ event.date }}</li>
            {% endif %}
            {% if event.location %}
              <li>‚Ä¢ Location: {{ event.location }}</li>
            {% endif %}
            {% if event.category %}
              <li>‚Ä¢ Event type: {{ event.category }}</li>
            {% endif %}
            <li>
              ‚Ä¢ Current entries:
              {% set count = event.registrations | length %}
              {% if count == 0 %}
                no registrations yet.
              {% elif count == 1 %}
                1 registration.
              {% else %}
                {{ count }} registrations.
              {% endif %}
            </li>
            <li>‚Ä¢ Entry: online registration in advance using the form linked below.</li>
            <li>‚Ä¢ Audience: open to local visitors, families and competitors taking part in the Games.</li>
          </ul>
        </section>

        <section class="mb-5">
          <h2 class="text-sm font-semibold text-slate-900 mb-2">
            Recommended to bring
          </h2>
          <ul class="text-xs sm:text-sm text-slate-600 space-y-1.5">
            <li>‚Ä¢ Comfortable footwear suitable for outdoor ground.</li>
            <li>‚Ä¢ A light waterproof jacket in case of rain.</li>
            <li>‚Ä¢ Drinking water and a small snack.</li>
            <li>‚Ä¢ A small backpack to carry personal items.</li>
          </ul>
        </section>

        <section class="mb-4 rounded-lg border border-dashed border-emerald-200 bg-emerald-50 px-4 py-3">
          <h3 class="text-sm font-semibold text-emerald-800 mb-1">
            Before you register
          </h3>
          <p class="text-xs sm:text-sm text-emerald-800 leading-relaxed">
            Please check the event date and location carefully, and make sure you are available on the
            day. Basic outdoor clothing and suitable footwear are recommended for all activities, and
            organisers may contact you by email with final timings or updates.
          </p>
        </section>

        <section class="flex flex-wrap items-center justify-between gap-3 border-t border-slate-200 pt-4">
          <p class="text-xs sm:text-sm text-slate-600">
            Ready to take part in this event? Use the button below to submit your details online.
          </p>
          <a href="{{ url_for('register', event_id=event.id) }}"
             class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-medium">
            Register for this event
          </a>
        </section>
      </article>

      <aside class="space-y-4">
        <div class="rounded-xl border border-slate-200 bg-white shadow-sm p-4 sm:p-5 text-xs sm:text-sm text-slate-700">
          <h2 class="text-sm font-semibold text-slate-900 mb-3">
            Event overview
          </h2>
          <dl class="space-y-2">
            {% if event.name %}
              <div class="flex justify-between gap-2">
                <dt class="text-slate-500">Event</dt>
                <dd class="font-medium text-slate-900 text-right">{{ event.name }}</dd>
              </div>
            {% endif %}
            {% if event.category %}
              <div class="flex justify-between gap-2">
                <dt class="text-slate-500">Type</dt>
                <dd class="text-slate-800 text-right">{{ event.category }}</dd>
              </div>
            {% endif %}
            {% if event.date %}
              <div class="flex justify-between gap-2">
                <dt class="text-slate-500">Date</dt>
                <dd class="text-slate-800 text-right">{{ event.date }}</dd>
              </div>
            {% endif %}
            {% if event.location %}
              <div class="flex justify-between gap-2">
                <dt class="text-slate-500">Location</dt>
                <dd class="text-slate-800 text-right">{{ event.location }}</dd>
              </div>
            {% endif %}
          </dl>

          <div class="mt-4 pt-3 border-t border-slate-200 text-xs text-slate-600 leading-relaxed">
            This information panel gives a quick snapshot of when and where the event takes place.
            Use the main description on the left to understand what to expect on the day.
          </div>
        </div>

        <div class="rounded-xl border border-slate-200 bg-slate-50 p-4 text-xs text-slate-600 leading-relaxed">
          <h3 class="text-sm font-semibold text-slate-900 mb-2">
            Who this event is for
          </h3>
          <p>
            The event is designed for visitors who want to experience the atmosphere of the Paisley
            Highland Games, whether by joining in as competitors or simply supporting friends and family.
          </p>
        </div>

        <div class="rounded-xl overflow-hidden border border-slate-200 bg-white shadow-sm">
          {% if event.name == "Football Tournament" %}
            {% set img_file = "1.jpg" %}
          {% elif event.name == "Hillwalking Challenge" %}
            {% set img_file = "2.jpg" %}
          {% elif event.name == "Highland Dance Showcase" %}
            {% set img_file = "3.jpg" %}
          {% elif event.name == "Family Fun Run" %}
            {% set img_file = "4.jpg" %}
          {% else %}
            {% set img_file = "1.jpg" %}
          {% endif %}

          <img
            src="{{ url_for('static', filename='images/' ~ img_file) }}"
            alt="Illustration of {{ event.name }}"
            class="w-full h-40 sm:h-48 object-cover">
          <div class="px-4 py-3 text-xs text-slate-600">
            A sample image reflecting the atmosphere of {{ event.name }}.
          </div>
        </div>
      </aside>
    </div>
  </section>
{% endblock %}